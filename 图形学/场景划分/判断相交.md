
### 光线定义
光线是射线，有起点 $o$ ，长度 $t$ 和方向 $d$ ：
![[图形学/场景划分/_attachments/OV1ZN_rtt).png | 177]]
$$r(t) = o + td\quad (0\le t)$$

光线的表示方法：
```cpp
struct Ray {
	vec3 origin;
	vec3 direction;
};
```


### 光线和平面的交点
![[图形学/场景划分/_attachments/ue9fe8171_Pasted Graphic 1.png | 184]]

点 $P$ 是光线和平面的交点，$P'$ 是平面上异于点 $P$ 的任意一点
交点 $P$ 可以通过以下方程组计算得到：
$$\left\{
\begin{array}{ll}
(P-P')\cdot N = 0 \\
O + t d = P
\end{array}
\right.$$


### 光线和三角形的交点
**第一种思路**：

1. 首先得到光线和三角形所在平面的交点
2. 判断交点是否在三角形内部

**第二种思路**：

- 利用三角形的重心坐标表示法，直接建立方程组

![[图形学/场景划分/_attachments/u6a48350c_image.png | 432]]

