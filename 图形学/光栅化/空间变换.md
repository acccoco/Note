
## 空间的定义
以 OpenGL 为例：

| 模型空间                  | ![[图形学/光栅化/_attachments/ud1b41d3b_Pasted Graphic.png \| 99]]              | 右手系                                                               |
| ------------------------- | ------------------------------------------------------------------- | -------------------------------------------------------------------- |
| 世界空间                  | ![[图形学/光栅化/_attachments/uc292c034_Pasted Graphic 1.png \| 150]]           | 右手系                                                               |
| 观察空间/视空间           | ![[图形学/光栅化/_attachments/ud6d58050_Pasted Graphic 2.png \| 221]]           | 右手系；固定于摄像机上的坐标系；以摄像机为原点，以摄像机的朝向为$-z$ |
| 标准化设备坐标（NDC）     | ![[图形学/光栅化/_attachments/u3b516dfb_far..png \| 221]]                       |  **左手系** （图中是 frustum）OpenGL 中，NDC 的范围是 $[-1, 1]^3$                |
| 屏幕空间/framebuffer 空间 | ![[图形学/光栅化/_attachments/u60c1a0f3_Pasted Graphic 4.png \| 221]]           | 深度测试发生在这里深度范围是$[0,\ 1]$，越大离摄像机越远              |


## 空间之间的变换

### model 变换
model 变换将「模型坐标系」中的坐标变换到「世界坐标系」中
已知点在模型坐标系中的表示，求点在世界坐标系中的表示
![[图形学/光栅化/_attachments/ucfd0862e_image.png | 349]]

变换的过程：

- 模型空间中一点的坐标：$P$
- 模型的位置变换矩阵为 $T$
- 模型的旋转变换矩阵为 $R$
- 模型的缩放变换矩阵为 $S$
- 模型空间中的点在世界空间中的坐标为：

$$P' = T\cdot R\cdot S\cdot P$$

注：三个变换矩阵的顺序不能变


### 视口变换
视口变换将 NDC 变换到屏幕空间坐标。视口变换应用的窗口就是屏幕空间，屏幕空间的单位是像素
这个变换是指：将 NDC 中的内容投影到屏幕空间中的一块矩形区域
![[图形学/光栅化/_attachments/ufdb472e9_image.png | 462]]

然后进行简单的线性变换即可。每个 fragment 都有自己的深度，OpenGL 中默认的深度范围是 $[0,\ 1]$
