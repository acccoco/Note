
## 采样
采样是什么：

- 时域角度：原始信号与 impulse train 进行乘积
- 频域角度：水平复制搬移频谱信号

**时域角度**：
原始的时间连续的信号表示为 $x(t)$ ，采样后的时间离散的信号为 $x[n]$ ，采样的周期为 $T$ 。
采样的信号为 impulse train，采样就是将原始信号与采样信号进行相乘：
$$x_s(t) = x(t) \sum_{k=-\infty}^{\infty} \delta(t - kT) 
= \sum_{k=-\infty}^{\infty}x[k]\delta(t - kT)$$
![[图形学/反走样/_attachments/1667212931.961132_sampler-examples.png | 401]]

**频域角度**：
根据「卷积定理」，时域的乘积对应频域的卷积

- impulse train 经过傅立叶变换后仍然是 impulse train
- 原始信号 $x(t)$  傅立叶变换之后的频域函数记为$ X(i\omega)$ 

采样后对应的频域函数为：
![[图形学/反走样/_attachments/1667212932.257182_sample-fourier.png | 392]]

其中：$T$  是采样的周期，$\omega_0 = 2\pi / T$ 

从频域角度可以看出，采样就是对原始信号的频域图像进行复制平移：
![[图形学/反走样/_attachments/1667212932.596218_frequency-after-sample.png | 372]]

> 需要确保采样频率 $\omega_0$  大于原始信号最大频率 $\omega_b$  的两倍，才能避免「混叠」。这也是「奈奎斯塔采样定理」的内容。



### 如何避免混叠
从频域分析采样过程可知：只要去掉原始信号中的高频信号（相对于采样频率来说），就可以避免混叠。
具体来说，就是先对原始信号进行低通滤波，再进行采样。


## 重建
重建也就是滤波（filter），从时域和频域角度来看：

- 时域角度：原信号与 filter 信号进行卷积
- 频域角度：低通滤波

常见的 filter 有这三种：
![[图形学/反走样/_attachments/1667212932.9316711_Pasted Graphic 1.png | 552]]

从他们的频域图像可以看出，$sinc(t) = \frac{\sin(\pi t)}{\pi t}$ 能够做到完美还原原始的信号（前提是采样过程不丢失信息）
![[图形学/反走样/_attachments/1667212933.389985_image.png | 411]]
> $sinc(t)$ 实现起来比较复杂，实际会使用一些近似的函数，例如 Gaussian filter



## 重采样
resample 的过程：对于一个离散信号，先用 filter 进行重建，再进行采样。

**magnification，upsampling**：新的采样频率要高于原始的采样频率
![[图形学/反走样/_attachments/1667212933.739726_image.png | 506]]

**minification，downsampling**：新的频率要低于原始的采样频率
低通滤波截取掉高频信号，确保采样不会出现混叠
![[图形学/反走样/_attachments/1667212934.014797_image.png | 439]]
![[图形学/反走样/_attachments/1667212934.275001_image.png | 507]]
> mipmap 实际上就是resampling 的「**预计算**」结果。
> 因为 mipmap 使用低通滤波去掉了信号的高频，所以可以避免「混叠」aliase。
> 硬件会一组 4 个地运行 `fragment shader`，方便进行导数运算，对比 pixel 的频率和纹理 texel 的频率，选择是否进行 minification。


## 参考

- GAMES101, Lingqi Yan
