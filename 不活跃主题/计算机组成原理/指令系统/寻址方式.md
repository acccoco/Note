寻址是什么意思：

- 指令寻址：寻找下一条要执行指令的地址
- 数据寻址：寻找本条指令的**数据地址**；

**CPU 是如何区分各种寻址方式的**：在指令中有专门的「寻址特征」字段
![[不活跃主题/计算机组成原理/指令系统/_attachments/1634557163292-cf4798ba-c6ae-4c60-af26-a20533be7335.png \| 292]]


## 各种寻址方式
注：指令中的形式地址用 `A` 表示，操作数的地址用 `EA` 表示，`()` 表示寄存器或内存中的内容

| **隐含寻址**       |                                                                                   | 例如：隐含地从累加器（ACC）中获得操作数，计算的结构也放入累加器中                                                                                                      |
| ------------------ | --------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **立即数寻址**     | ![[不活跃主题/计算机组成原理/指令系统/_attachments/1634558957742-6efea5f3-2cac-49ca-8908-62033d3d56c8.png \| 148]] | - 指令的「地址字段」给出的是「操作数」本身                                                                                                                             |
| **直接寻址**       | ![[不活跃主题/计算机组成原理/指令系统/_attachments/1634558973817-c80841d8-2831-4013-bb39-cd257f8d0a2d.png \| 334]] | - 指令中的形式地址就是操作数的实际地址- 即：`EA = A`                                                                                                                   |
| **间接寻址**       | ![[不活跃主题/计算机组成原理/指令系统/_attachments/1634559060723-f95f91b1-27c1-48fe-8330-59f27863c057.png \| 183]] | - 形式地址是操作数地址的地址- 即：`EA = (A)`                                                                                                                           |
| **寄存器寻址**     |                                                                                   | - 指令中直接给出了寄存器的编号- 即：`EA = Ri`                                                                                                                          |
| **寄存器间接寻址** | ![[不活跃主题/计算机组成原理/指令系统/_attachments/1634559108885-48cfec42-ebda-4a5f-b542-67a52a2a34dd.png \| 227]] | - 寄存器中给定的是操作数的地址- 即：`EA = (Ri)`                                                                                                                        |
| **相对寻址**       |                                                                                   | - 用于**指令寻址**，例如转移指令- 操作数的地址为：`EA = (PC) + A` - 指令**一定是根据 **`**PC**` 从主存中读出的                                                         |
| **基址寻址**       | ![[不活跃主题/计算机组成原理/指令系统/_attachments/1634559209782-16aa4f63-2c32-4b0c-8ecc-cfda9c15183f.png \| 230]] | - 使得程序可以在内存中**浮动**，「基址寄存器 BR」中的内容由「操作系统」决定- 「基址寄存器」可以是专门的，也可以用「通用寄存器」来替代- 操作数的地址为：`EA = (BR) + A` |
| **变址寻址**       |                                                                                   | - 用于实现「**数组**」的，「变址寄存器 IX」的内容由用户决定- 「变址寄存器」可以是专门的，也可以用「通用寄存器」来替代- 操作数的地址：`EA = (IX) + A`                   |
| **堆栈寻址**       |                                                                                   | - 用于堆栈结构的计算机中，大部分指令都是无操作数的- 取操作数的过程：栈顶指针增加，取出栈顶元素- 写入操作数的过程：放入栈顶元素，堆栈指针减少                           |


**相对寻址与转移指令**：
跳转指令的执行过程为：先取指令，然后 `PC` 自增，最后执行跳转指令
例如：

- 相对跳转指令为 `jmp 30H`，指令长度为 `4` 字节，`PC = 1200H`；
- 取完跳转指令后 `PC = 1204H`；
- 执行完跳转指令后，`PC = 1234H` 

**指令中的数字以「补码」的形式存放**：
以基址寻址为例：

- 基址寄存器中的内容为 `F000 0000H`，形式地址为 `FF12H` 
- 如何进行手工计算，得到操作数的地址 `EA`：
   - 如果直接将两者相加，会得到 `EA = F000 FF12H`，这是错误结果
   - 应该首先将形式地址化为其对应的真数 `-00EEH`，然后相加得到 `EA = EFFF FF12H` 

**基址寻址的作用**：
使得程序可以在内存空间中浮动。
程序开始执行时，操作系统会为 「基址寄存器」进行赋值，这个值在程序的整个执行期间都不会改变；用户并不关心「基址寄存器」的址，只需要给定合适的**偏移量**即可。
