
### 基本语法
|  | AT&T | Intel |
| --- | --- | --- |
| 使用寄存器 | `%eax` | `eax` |
| 源/目的操作数 | `movl 源, 目的` | `mov 目的, 源` |
| 操作数长度标识 | `movw %ax, %bx` | `mov bx, ax` |



### 寻址
|                | AT&T                                                  | Intel                                                       |
| -------------- | ----------------------------------------------------- | ----------------------------------------------------------- |
| 立即数寻址     | `pushl $1`                                            | `push 1`                                                    |
| 寄存器寻址     | `%ebp`                                                | `ebp`                                                       |
| 寄存器间接寻址 | `(%eax)`                                              | `[eax]`                                                     |
| 变址寻址       | - `var(%eax)`- `arr( ,%eax, 4)`- `arr(%ebx, %eax, 8)` | - `[eax + var]`- `[eax * 4 + arr]`- `[ebx + eax * 8 + arr]` |



### 数据类型长度
注：32 位机和 64 位机都是由 16 位机发展过来的，为了兼容，汇编中「**字**」的大小就是 2字节。

AT&T 汇编会在指令中体现出数据的长度：
```c
movb      # 1 字节
movw      # 2 字节
movl      # 4 字节
movq      # 8 字节
```

Intel 汇编会显式指出：
```c
mov byte  ptr [ebx], 2      # 将 2 以 1 字节的形式传送到 ebx 指向的内存中
mov word  ptr [ebx], 2      # 将 2 以 2 字节的形式传送到 ebx 指向的内存中
mov dword ptr [ebx], 2      # 将 2 以 4 字节的形式传送到 ebx 指向的内存中
```


### 通用寄存器
这些命名有些历史原因；除了 `EBP` 和 `ESP` 外，其他的寄存器使用较为随意。
![[不活跃主题/计算机组成原理/汇编基础/_attachments/1634561048810-5f417b7a-4b20-4d00-915e-66b9c8ab8849.png | 559]]

寄存器长度示意图：
![[不活跃主题/计算机组成原理/汇编基础/_attachments/1632842339824-6e85c9f2-3d7c-448b-adbd-d91823b660b1.png | 191]]


### 状态字的标志
最近的算数（`add, imul, shl, inc, sal`），逻辑运算（`or, and, not`）会引起条件码寄存器的改变：

| **标志** | **说明**                          | **注**         |
| -------- | --------------------------------- | -------------- |
| `CF`     | **无符号整数**运算是否有进位/借位 | 无符号整数运算 |
| `ZF`     | 运算结果是否为 0                  |                |
| `SF`     | 有符号运算的符号位，负数时 `SF=1` | 有符号数运算   |
| `OF`     | **有符号数**运算结果是否溢出      | 有符号数运算   |
| `PF`     | 奇偶标志                          |                |
| `AF`     | 辅助进位                          |                |


注：

- `cmp` 指令与 `sub` 指令的运算结果一样，但是只改变「标志位」
- `test` 指令与 `and` 指令的运算结果一样，但只改变「标志位」
