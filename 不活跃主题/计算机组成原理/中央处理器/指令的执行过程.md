
### CPU 的结构
**CPU 的组成结构如下**：
![[不活跃主题/计算机组成原理/中央处理器/_attachments/1634735875233-e8fdf521-8705-4022-b00e-0fab3a0ecb22.png | 319]]

**CPU 中的寄存器**：

| **寄存器**       |         | **说明**                                       |
| ---------------- | ------- | ---------------------------------------------- |
| **通用寄存器**   |         |                                                |
| **数据寄存器**   |         | 专门用来存放数据的寄存器                       |
| **地址寄存器**   |         | 比如专用的基址寄存器                           |
| **条件码寄存器** |         | 例如程序算数运算的进位标志，溢出标志等         |
| **控制相关**     | **MAR** | 用于存放要访问的主存的地址，与「地址总线」相连 |
|                  | **MDR** | 用于存放和主存通信的数据，与「数据总线」相连   |
|                  | **PC**  | 存放下一条指令的地址                           |
|                  | **IR**  | 存放当前指令的内容                             |



### 时序系统
**机器周期**：指令执行过程的基准时间。**访问一次存储器**的时间即为一个机器周期。
> **这个基准时间是如何确定的**：如果以完成一条指令所需的最长时间作为基准时间，显然有些浪费。考虑到每个指令都有取指阶段，会进行一次访存操作，因此规定访问一次存储器的时间为基准时间。


**时钟周期**：时钟信号控制「节拍发生器」即可产生「节拍」，一个「节拍」的宽度对应一个「时钟周期」。在一个「节拍」内，可以执行一个或多个并行的「微操作」，「节拍」是控制计算机操作的最小时间单位。
> **时钟周期如何产生**：由机器的主振电路发出的「脉冲信号」，经整形，倍频，分频后产生。时钟信号的频率即为 「CPU 主频」。
> **时钟周期的基准是如何确定的**：相邻状态单元间的组合逻辑电路的最大延迟。也就是要让逻辑电路来得及反应。
> **可以不需要时钟吗**：那种 CPU 叫做「异步 CPU」，反应很快，但设计复杂。


**指令周期**：执行一个指令所需要的时间。每个「指令周期」包含的「机器周期」数可以不同；每个「机器周期」包含的「时钟周期」数也可以不同。

![[不活跃主题/计算机组成原理/中央处理器/_attachments/1634886564678-cb5243df-2d8f-4234-9bc6-1b198b27d18c.png | 400]]


### 指令执行的各个阶段
共四个阶段：「取指周期」，「间址周期」，「执行周期」，「中断周期」；每个阶段都**可以有**访问内存的操作。

- **取指周期**：根据「程序计数器 PC」去主存取指令，取完后「PC 自增」。
- **间址周期**：如果指令的「操作数」并不是最终的「有效地址」，则需要在这个阶段得到，可能会进行访问内存的操作。最终得到的是「**操作数的有效地址**」。
- **执行周期**：根据「操作数的有效地址」得到操作数，并进行运算。
- **中断周期**：如果**没有检测到**中断，就不需要进入这个周期。中断发生时，需要将「程序计数器 PC」的内容保存到栈中。

**「加法指令」的例子**：

- 取指令 `PC->MAR->M->MDR->IR`
   - 也就是从内存中读取当前指令的内容，已知当前指令的地址
   - 具体过程为：将**当前指令的地址**从「程序计数器（PC）」放入「地址寄存器（MAR）」中，主存就会读取对应地址的地址，并将其放入「数据寄存器（MDR）」中，然后「指令寄存器（IR）」再从其中取得指令
- 执行指令
   - `Ad(IR)->MAR->M->MDR->X`：从内存中读取加数，并存放在「操作数寄存器（X）」中
   - `ACC->ALU, X->ALU`：将累加器中的被加数和操作数寄存器中的加数都放入「算数逻辑单元ALU」中
   - `ALU->ACC`：执行加法后，加过输出到累加器中

过程如图：
![[不活跃主题/计算机组成原理/中央处理器/_attachments/1634741892528-8a9a20b4-342c-4805-bf47-80a2d4c80dd0.png | 839]]

