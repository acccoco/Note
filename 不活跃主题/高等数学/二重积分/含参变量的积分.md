主要解决以下问题：

- 积分上下限与变量变量有关，如何求导
- 被积函数与求导的变量有关，如何求导


## 第一个定理
如果函数 $f(x,y)$  及其偏导数 $f_x(x,y )$  在矩形区域 $R = [a,b] \times [c, d]$  上连续，那么以下函数在 $[a, b]$  上可微分：
$$\varphi(x) = \int_c^d f(x, y)dy\quad (a \le x \le b) $$
且微分为：
$$\color{red}{\varphi'(x) = \frac{d}{dx} \int_c^d f(x, y)dy = \int_c^d f_x(x, y)dy}$$

这个可以叫做「先导后积公式」

**下面给出推导过程**：
$\varphi'(x)$  按照导数的定义，可以写成：
$$\varphi'(x) = \lim_{\Delta x \to 0} \int_c^d \frac{f(x + \Delta x, y) - f(x, y)}{\Delta x}dy$$

由拉格朗日中值定理可得：
$$f(x + \Delta x, y) - f(x, y) = f_x(x + \theta \Delta x, y)\Delta x \quad (0 < \theta < 1)$$

带入 $\varphi'(x)$  可以得到：
$$\varphi'(x) = \lim_{\Delta x \to 0} \int_c^d
f_x(x + \theta \Delta x, y) dy$$  

由「一致性连续定理」可知：对于任意小的正数 $\varepsilon$ ，只要 $|\Delta x|$  小于某个正数 $\delta$ ，那么就有：
 $|f_x(x + \theta \Delta x, y) - f_x(x, y)| < \varepsilon$ 

> 【一致性连续定理】
> 如果 $f(P)$  在有界闭区域 $D$  上连续，那么对于任意 $\varepsilon > 0$ ，总存在 $\delta > 0$ ，使得对于区域 $D$  上的任意两点，只要 $|P_1 P_2| < \delta$ ，都有：
> $|f(P_1) - f(P_2)| < \varepsilon$ 


因此：
$$\begin{array}{rlc}
&\left|
\int_c^d
[f_x(x + \theta \Delta x, y) - f_x(x, y)]dy
\right| \\
< & \int_c^d|f_x(x +\theta \Delta x, y) - f_x(x, y)|dy \\
< & \int_c^d \varepsilon dy = \varepsilon(d-c) 
\quad (|\Delta x| < \delta)
\end{array}$$

当 $\Delta x \to 0$  时，有：
$$\lim_{\Delta x \to 0} \int_c^d [f_x(x + \theta \Delta x, y) - f_x(x, y)]dy = 0$$

最后带回到 $\varphi'(x)$  的表达式可以得到：
$$\varphi'(x) = \lim_{\Delta x \to 0} \int_c^d f_x(x, y)dy = \int_c^d f_x(x, y)dy$$

再从头到尾看一遍，就是：
$$\frac{d}{dx} \int_c^d f(x, y)dy =
\varphi'(x)
= \int_c^d f_x(x, y)dy$$


## 第二个定理
如果函数 $f(x, y)$  及其偏导数 $f_x(x, y)$  在矩形区域 $R = [a, b] \times [c,d]$  上连续，函数 $\alpha(x), \beta(x)$  在区间 $[a, b]$  上可微分，且满足：
$$c\le \alpha(x) \le d, \quad c\le \beta(x) \le d
\quad (a \le x \le b)$$

那么以下函数：
$$\Phi(x) = \int_{\alpha(x)}^{\beta(x)} f(x , y)dy$$
在 $[a, b]$  上可微分，且有：
$$\color{red}{
\begin{array}{rll}
\Phi'(x) & = & \frac{d}{dx} \int_{\alpha(x)}^{\beta(x)}f(x, y)dy \\
& = & \int_{\alpha(x)}^{\beta (x)} f_x(x, y)dy + f[x, \beta(x)]\beta'(x) - f[x, \alpha(x)]\alpha'(x)
\end{array}
}$$

这个叫做「莱布尼兹公式」，可以用于变限积分的求导。

特别的，如果被积函数与 $x$  无关，那么有：
$$\color{red}{
\frac{d}{dx}\int_{\alpha(x)}^{\beta(x)}f(y)dy = f[\beta(x)]\beta'(x) - f[\alpha(x)]\alpha'(x)
}$$

**下面给出推导过程**：
首先按照定义给出 $\Phi'(x)$  的表达式：
$$\Phi'(x) = \lim_{\Delta x \to 0}
\frac{\int_{\alpha(x+\Delta x)}^{\beta(x+\Delta x)}f(x+\Delta x, y)dy - \int_\alpha^\beta f(x, y)dy}{\Delta x}$$

其中 $\int_{\alpha(x+\Delta x)}^{\beta(x+\Delta x)}f(x+\Delta x, y)dy$  部分可以通过改变上下限得到：
$$\int_{\alpha(x+\Delta x)}^{\beta(x+\Delta x)}f(x+\Delta x, y)dy = 
\int_{\alpha(x+\Delta x)}^{\alpha(x)}\sim dy +
\int_{\alpha(x)}^{\beta(x)} \sim dy +
\int_{\alpha(x)}^{\beta(x+\Delta x)}\sim dy$$

将上述内容带回到 $\Phi'(x)$   的表达式：
$$\begin{array}{rcl}
    \Phi'(x) & = &
    	\lim_{\Delta x \to 0}\frac{1}{\Delta x}
    	\left[
            \int_{\beta(x)}^{\beta(x + \Delta x)}f(x + \Delta x, y)dy + 
            \int_{\alpha(x + \Delta x)}^{\alpha(x)}f(x + \Delta x, y)dy
        \right] \\
     & + &  \lim_{\Delta x \to 0}\int_{\alpha(x)}^{\beta(x)}\frac{f(x + \Delta x, y) - f(x, y)}{\Delta x}
 \end{array}$$

对第一部分使用「积分中值定理」：
$$\begin{array}{lll}
    \lim_{\Delta x \to 0}\frac{1}{\Delta x}\int_{\beta(x)}^{\beta(x + \Delta x)}f(x + \Delta x, y)dy & 
        = & 
        \lim_{\Delta x \to 0}\frac{[\beta(x + \Delta x) - \beta(x)]}{\Delta x}f(x + \Delta x, \eta) \\
     & = & \beta'(x)f[x,\, \beta(x)]
\end{array}$$
其中 $\eta$  介于 $\beta(x),\, \beta(x + \Delta x)$  之间
 
第二部分可以用上面证得的定理，得到：
 $$\lim_{\Delta x \to 0}\int_{\alpha(x)}^{\beta(x)}\frac{f(x + \Delta x, y) - f(x, y)}{\Delta x} = 
\int_{\alpha(x)}^{\beta(x)}f_x(x, y)dy$$

最终，可以得到 $\Phi'(x)$  的表达式：
$$\Phi'(x) = 
\int_{\alpha(x)}^{\beta (x)} f_x(x, y)dy + f[x, \beta(x)]\beta'(x) - f[x, \alpha(x)]\alpha'(x)$$


