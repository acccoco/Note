
## 二叉查找树BST

### 二叉查找树的插入
新插入的节点一定是叶节点


### 二叉查找树的删除
分 3 种情况讨论：

1. 如果删除的节点是叶子节点，则直接删除
2. 如果删除的节点只有左子树或者右子树，则替代
3. 如果删除的节点有左右子树，那么在左子树中寻找直接前驱，或者在右子树中寻找直接后继，将其摘除，替代当前节点即可。（删除直接前驱或者直接后继的过程中，一定是前两种情况）。

![[不活跃主题/数据结构与算法/树/_attachments/1630927833092-8d70aa49-efa6-4270-99b3-6c40c7a5d22f.png | 526]]


## 平衡二叉树 AVL
任意左右子树高度差不超过 1 
平衡因子：左子树与右子树的高度差
![[不活跃主题/数据结构与算法/树/_attachments/1630928199550-a5f6427b-ba4a-4457-b185-f4450587dd17.png | 411]]

平衡二叉树的最大高度：

- 高度为 0 的平衡二叉树有 0 个节点
- 高度为 1 的平衡二叉树有 1 个节点
- 如果高度为 $h$  的平衡二叉树至少有 $n_h$  个节点，那么有：$n_h = n_{h-1} + n_{h-2} + 1$ ，满足贪心原则

> 高度为 $h$  的平衡二叉树最小节点数 $n_h$  为：
> - 斐波那契数列的递推公式为：$a_n = a_{n-1} + a_{n-2}$ ，通项为：$\frac{(\frac{1-\sqrt{5}}{2})^n - (\frac{1+\sqrt{5}}{2})^n}{\sqrt{5}}$ 
> - 节点数通项可以写作：$(n_h + 1) = (n_{h-1} + 1 ) + (n_{h-2}+1)$ 
> 
> - 斐波那契的首项：$a_0 = 0, a_1 = 1$ ；最小节点数的首项为：$n_0 = 0, n_1 = 1$  
> 
> - 最终：节点数通项为：$n_h = \frac{(\frac{1-\sqrt{5}}{2})^{h+2} - (\frac{1+\sqrt{5}}{2})^{h+2}}{\sqrt{5}} - 1$ 




### 平衡二叉树的插入
**如何恢复平衡**：因为插入导致二叉树不再平衡时，只需要找到第一个平衡因子绝对值大于 1 的节点，对其进行调整，即可让二叉树恢复平衡。

失衡情况可以归结为以下几种：（下面的模型可以覆盖任何的失衡情况）
**LL（或对称的RR）**：
![[不活跃主题/数据结构与算法/树/_attachments/1630929152653-4a7a3c92-174e-45e0-b203-38852a6e7a07.png | 492]]

**LR（或对称的RL）**：
（其中 CL 和 CR 的高度可以互换）
![[不活跃主题/数据结构与算法/树/_attachments/1630929175001-bff5caee-6353-40b4-a333-f56f268f800d.png | 504]]

注：**以上的旋转操作均不会改变「二叉查找树」的性质**。
