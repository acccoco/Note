
## ğŸ”äºŒåˆ†æŸ¥æ‰¾
> ç®—æ³•å’Œç¨‹åºè®¾è®¡æŠ€æœ¯çš„å…ˆé©±Donald Ervin Knuthæ›¾è¯´ï¼šè™½ç„¶äºŒåˆ†æŸ¥æ‰¾çš„åŸºæœ¬æ€æƒ³ç›¸å¯¹ç®€å•ï¼Œä½†ç»†èŠ‚å¯èƒ½ä¼šéå¸¸æ£˜æ‰‹

è¿™é‡Œæå‡ºä¸€ä¸ªäºŒåˆ†æŸ¥æ‰¾çš„é€šç”¨æ–¹æ³•ï¼š

- ç¦»å¼€å¾ªç¯çš„æ¡ä»¶æ˜¯ï¼š`**l == r**`ã€‚
- **æ— åŒ¹é…é¡¹æ—¶**ï¼Œè¿”å›å·¦ä¾§è¿˜æ˜¯å³ä¾§ï¼Œè¦çœ‹ï¼š
   - å·¦ä¾§ï¼š`mid = (l + r + 1) >> 1`
   - å³ä¾§ï¼š`mid = (l + r) >> 1`
- **æœ‰åŒ¹é…é¡¹æ—¶**ï¼Œè¿”å›å·¦ä¾§è¿˜æ˜¯å³ä¾§ï¼Œè¦çœ‹ï¼š
   - å·¦ä¾§ï¼š`r = mid`
   - å³ä¾§ï¼š`l = mid`
- ä½†æ˜¯ï¼Œè¿™é‡Œå¹¶æ²¡æœ‰å››ç§ç»„åˆï¼Œåªæœ‰ä¸¤ç§ç»„åˆï¼Œå¦å¤–ä¸¤ç§ä¼šé™·å…¥æ­»å¾ªç¯ã€‚æœ€ç»ˆå¾—åˆ°çš„ç»“æœå¦‚ä¸‹ï¼š

**1. æ— åŒ¹é…é¡¹æ—¶ï¼Œè¿”å›å³ä¾§ï¼›æœ‰åŒ¹é…é¡¹æ—¶ï¼Œè¿”å›å·¦ä¾§**
```cpp
int find(vector<int>& a, int t) {
	int l = 0;
	int r = a.size() - 1;
	while (l < r) {
		int mid = (l + r) >> 1;
		if (a[mid] < t)
			l = mid + 1;
		else // a[mid] >= t
			r = mid;
	}
	return l;
}
```
**2. æ— åŒ¹é…é¡¹æ—¶ï¼Œè¿”å›å·¦ä¾§ï¼›æœ‰åŒ¹é…é¡¹æ—¶ï¼Œè¿”å›å³ä¾§**
```cpp
int find(vector<int>& a, int t) {
	int l = 0;
	int r = a.size() - 1;
	while (l < r) {
		int mid = (l + r + 1) >> 1;
		if (a[mid] <= t)
			l = mid;
		else // a[mid] > t
			r = mid - 1;
	}
	return l;
}
```
æ€è€ƒè·¯çº¿ï¼šï¼šé€‰æ‹©`i=mid`è¿˜æ˜¯`j=mid`ï¼Ÿå‰è€…è¡¨ç¤ºåŒ¹é…æ—¶å¾—åˆ°å³ç«¯ï¼›ç„¶åï¼Œä¸ºäº†ä¸é™·å…¥æ­»å¾ªç¯ï¼Œåªèƒ½é€‰æ‹©`mid=(i + j + 1) >> 1`ï¼ˆæˆ–è€…`mid = (i + j) >> 1`ï¼‰ã€‚

## ğŸŒ´ä¸¤ä¸ªæ•°ç»„çš„ä¸­ä½æ•°é—®é¢˜

#### é¢˜ç›®æè¿°
> ç»™å®šä¸¤ä¸ªå¤§å°ä¸º m å’Œ n çš„æœ‰åºæ•°ç»„ nums1 å’Œ nums2ã€‚
> è¯·ä½ æ‰¾å‡ºè¿™ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ä¸­ä½æ•°ï¼Œå¹¶ä¸”è¦æ±‚ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(log(m + n))ã€‚
> ä½ å¯ä»¥å‡è®¾ nums1 å’Œ nums2 ä¸ä¼šåŒæ—¶ä¸ºç©ºã€‚
> ç¤ºä¾‹ 1:

```
nums1 = [1, 3]
nums2 = [2]
åˆ™ä¸­ä½æ•°æ˜¯ 2.0
```
> ç¤ºä¾‹ 2:

```
nums1 = [1, 2]
nums2 = [3, 4]
åˆ™ä¸­ä½æ•°æ˜¯ (2 + 3)/2 = 2.5
```

#### è§£é¢˜
é—®é¢˜çš„å…³é”®æ˜¯æ—¶é—´å¤æ‚åº¦è¦æ±‚ä¸º`O(log(m+n))`ã€‚
è€ƒè™‘å°†ä¸¤ä¸ªæ•°ç»„åˆå¹¶çš„æƒ…å†µï¼š
![[ä¸æ´»è·ƒä¸»é¢˜/æ•°æ®ç»“æ„ä¸ç®—æ³•/æŸ¥æ‰¾/_attachments/1600053633313-779adfa4-0496-4844-9f29-1a620e2fbf9d.png ]]
æ‰€ä»¥ï¼Œåªè¦æ‰¾åˆ°åˆé€‚çš„åˆ’åˆ†ï¼Œç¡®ä¿nums1å·¦ä¾§å…ƒç´ ä¸ªæ•°å’Œnums2å·¦ä¾§å…ƒç´ ä¸ªæ•°çš„å’Œä¸º`(m+n)/2`å³å¯ï¼ˆåœ¨æ­¤åªè€ƒè™‘m+nä¸ºå¥‡æ•°çš„æƒ…å†µï¼‰
åˆé€‚çš„åˆ’åˆ†æ˜¯æŒ‡ï¼š`LMax1 <= RMin2 && LMax2 <= RMin1`ã€‚
æ­¤å¤„æœ‰ä¸€ä¸ªæŠ€å·§ï¼šä¸è€ƒè™‘å…ƒç´ ï¼Œè€Œæ˜¯è€ƒè™‘åˆ’åˆ†ã€‚ä¾‹å¦‚ï¼šnums1æœ‰ï¼ˆm+1ï¼‰ç§åˆ’åˆ†ã€‚
![[ä¸æ´»è·ƒä¸»é¢˜/æ•°æ®ç»“æ„ä¸ç®—æ³•/æŸ¥æ‰¾/_attachments/1600053633398-3400d45e-0c24-45be-bdd3-c4d782c80760.png ]]
ä»£ç å¦‚ä¸‹ï¼šå¤æ‚åº¦å¯ä»¥è¾¾åˆ°ï¼š`O(log(min(m, n)))`ï¼Œ
```cpp
double findMedianSortedArrays(vector<int>& nums1, vector<int>& nums2) {
    int m = nums1.size();
    int n = nums2.size();
    // è®© nums1 è¡¨ç¤ºçŸ­çš„æ•°ç»„
    if (m > n)
        return findMedianSortedArrays(nums2, nums1);
    // æ’é™¤ m == 0 çš„æƒ…å†µ
    if (m == 0)
        return (nums2[(n - 1) >> 1] + nums2[n >> 1]) * 1.0f / 2.0f;
    int al = 0;		// nums1æ•°ç»„åˆ’åˆ†ä½ç½®çš„å·¦é™
    int ar = m;		// nums1æ•°ç»„åˆ’åˆ†ä½ç½®çš„å³é™
    int LMax1, RMin1, LMax2, RMin2;
    while (al <= ar) {
        int i = (al + ar) >> 1;
        int j = ((m + n) >> 1) - i;
        LMax1 = i == 0 ? INT32_MIN : nums1[i - 1];
        RMin1 = i == m ? INT32_MAX : nums1[i];
        LMax2 = j == 0 ? INT32_MIN : nums2[j - 1];
        RMin2 = j == n ? INT32_MAX : nums2[j];
        if (LMax1 > RMin2)
            ar = i - 1;
        else if (LMax2 > RMin1)
            al = i + 1;
        else
            break;
    }
    if ((m + n) % 2 == 1)	// m + n æ˜¯å¥‡æ•°çš„æƒ…å†µ
        return min(RMin1, RMin2);
    else					// m + n æ˜¯å¶æ•°çš„æƒ…å†µ
        return (max(LMax1, LMax2) + min(RMin1, RMin2)) * 1.0f / 2.0f;
}
```
