

[toc]



#### <span style="color:#0202c0;">形式语法概念</span>

##### 句型和句子

对于文法 $G[S]$ ，其中 $S$ 是开始符号：

- ==句型==：如果有 $S\Rightarrow^*\alpha$，且 $\alpha\in(V_N\cup V_T)^*$ ，那么称 $\alpha$ 是文法的一个句型。一个句型中既可以有终结符，又可以有非终结符，也可以是空符号串。

- ==句子==：如果有 $S\Rightarrow^* \beta$，且 $\beta\in {V_T}^*$，那么称 $\beta$ 是文法的一个句子。句子仅包含终结符，可以是空符号串。




##### 短语，直接短语和素短语

对于文法 $G[S]$，若：$\alpha,\beta,\delta\in(V_N\cup V_T)^*$，$A\in V_N$，有 $S\Rightarrow^*\alpha A\beta$，

- ==短语==：如果存在 $A\Rightarrow^+ \delta$，则称 $\delta$ 是句型 $\alpha\delta\beta$ 的相对于非终结符 $A$ 的短语。
- ==直接短语==：如果存在 $A\Rightarrow \delta$，则称 $\delta$ 是句型 $\alpha\delta\beta$ 的相对于非终结符 $A$ 的直接短语。

素短语：素短语是一个短语，它至少含有一个终结符，且自身不包含其他的素短语。



##### 句柄

句型的==最左直接短语==，是句型的句柄。在规范归约（最左归约）中最先被归约的短语。



##### 例子

有文法：
$$
G[E]: 
{
E\to E+T|T\\
T\to T*F|F\\
F\to(E)|i
}
$$
对于句型：$i*i+i$：

画出其语法树：

![[不活跃主题/编译原理/语法分析/_attachments/Pasted image 20221101004148.png | 200]]

- 直接短语：$i_1, i_2, i_3$ 都是相对于非终结符 $F$ 的直接短语；（只列举了部分）
- 句型的句柄为：$i_1$；
- 素短语为：$T*F$、$F*F$、$E+T$、$i_1$、$i_2$、$i_3$；（之列举了部分）



---



#### <span style="color:#0202c0;">LR分析</span>

$LR$ 分析是一种自下而上的分析过程，运用了==规范归约==（最左归约），

- $L$：表示自左至右读取输入符号串
- $R$：表示规范推导的逆过程规范归约

$LR$ 分析是一种分析方法，也是一种文法规定。现在能用上下文无关文法（$2$ 型文法）描述的程序设计语言一般也能用 $LR$ 方法进行分析，是当前最一般的分析方法。



##### $LR$ 分析的结构和原理

组成结构：一个输入符号串，一个下推分析栈（下推自动机 _PDA_ ），一个总控程序，一个分析表。

原理：分析器自左至右扫描输入符号串，根据当前分析栈的文法符号，按照分析表的指示完成分析动作。



##### 分析栈

分析栈最开始存放的是符号 $\$$。

分析栈的思路：能归约就归约，不能归约就移进。

![[不活跃主题/编译原理/语法分析/_attachments/Pasted image 20221101004204.png | 400]]



##### 活前缀与可归前缀

- 文法的活前缀：分析栈中存储的符号串。必须要是文法可以推导出来的句型的前缀。
- 文法的可归前缀：包含句柄（句型的最左直接短语）的活前缀。也就是分析栈中的内容可以归约了。



##### 拓广文法

将文法 $G[S]$ 变为 $G[S']$，通过加入一条产生式：
$$
S'\to S
$$
拓广可以让状态机的构建更方便。拓广可以使 $S$ 变成了可归前缀。



##### 分析表

分析表由两个子表构成：分析动作表和状态转移表。

$S$ 表示移进；$r$ 表示使用产生式归约；$acc$ 表示接收

![[不活跃主题/编译原理/语法分析/_attachments/Pasted image 20221101004215.png | 300]]



##### 各种 $LR$ 分析器的比较

- $LR(0)$ 分析器的分析能力最低，它是构造其余分析器的基础
- $SLR(1)$是为了解决构造 $LR(0)$ 分析器所出现的问题，而出现的分析方法
- $LR(1)$ 分析器的分析能力是四种 $LR$ 分析器中最强的，但是要求的工作量和存储空间看庞大
- $LALR(1)$ 分析器能力介于 $SLR(1)$ 和 $LR(1)$ 之间，分析表规模较 $LR(1)$ 小很多；（语法分析器自动生成工具 _YACC_ 和 _OCCS_ 都是为自动生成 $LALR(1)$ 分析器而研制的。）

![[不活跃主题/编译原理/语法分析/_attachments/Pasted image 20221101004225.png | 300]]

