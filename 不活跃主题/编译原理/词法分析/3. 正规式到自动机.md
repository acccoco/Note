

从正规式到有穷自动机的路径：

```mermaid
graph LR
A(正规表达式) -->B(NFA)
    B --> C(DFA)
    C --> D(词法分析程序)
```

---



#### <span style="color:#0202c0;">从正规式到NFA</span>

##### 基本规则

![[不活跃主题/编译原理/词法分析/_attachments/Pasted image 20221101003400.png | 200]]



##### 复合情形

- 注：`r*`改写成如下形式，不易出错。

![[不活跃主题/编译原理/词法分析/_attachments/Pasted image 20221101003416.png | 400]]

---



#### <span style="color:#0202c0;">从NFA到DFA</span>

==状态$s$的$\varepsilon-$闭包==：从状态$s$出发，经过零个或多个$\varepsilon-$转换，可以到达的状态的集合，将这个集合记为：$\overline{s}$。

==状态集合$S$的$\varepsilon-$闭包==：集合中每个状态的$\varepsilon-$闭包，他们构成的并集。



##### 构造步骤

通过 _NFA_ $M$构造 _DFA_ $\overline{M}=(\overline{S};\Sigma;\overline{T};\overline{s_0},\overline{A})$，==构造步骤==：

1. 计算$M$的初始状态$s_0$的$\varepsilon-$闭包，并将其作为$\overline{M}$的初始状态：$\overline{s_0}$，加入到$\overline{S}$中。
2. 对$\overline{S}$中的每一个**未标记**的状态：$\overline{s_i}$，以及字母表中的每一个字母：$c\in\Sigma$，都可以得到一个新的状态：$\overline{s_{ic}}$
   - $s_{ic}=\{t|T(s, c)=t,s\in\overline{s_i}\}$，计算$s_c$的$\varepsilon-$闭包，得到$\overline{s_c}$
   - 将新的到的状态加入到$\overline{S}$中：$\overline{S}=\overline{S}\cup\{\overline{s_{ic}}\}$

3. 并且增加新的转换函数：$\overline{T}=\overline{T}\cup\{\overline{T}(\overline{s_{i}},c)=\overline{s_{ic}}\}$
4. 重复以上的步骤，直到$\overline{S}$中全是**已标记**的状态。
5. 只要$\overline{M}$中的某个状态与$M$中的终结状态有交集，这个状态就是终结状态：$\overline{A}=\{\overline{s_i}|\overline{s_i}\cap A\ne\varnothing\}$



##### 转换例子：

![[不活跃主题/编译原理/词法分析/_attachments/Pasted image 20221101003433.png | 300]]

---



#### <span style="color:#0202c0;">DFA状态数最小化</span>

思路：状态等价类划分。

如何判断两个状态==是否等价==：对于任意串$w$，分别从$s_1$和$s_2$出发（将他们视为初始状态），如果对$w$的接受状态相同，则等价；否则是可区分的。

如果两个状态等价：可以删去一个状态。哪些应该保留，哪些不应该保留？将要删除的状态的入边移植到要保留的状态上即可。

##### 如何使用算法划分等价类

- 首先将状态集合$S$粗略的划分出两个等价类$A$和$S-A$。
- 对于某个等价类$K$，取出其中的两个状态来考察：$s_1,\;s_2$
  - 如果存在一个字符：$a\in\Sigma$，$s_1$或$s_2$中的一个无法识别它
  - 或者$s_1,s_2$在识别后到达的状态分别处于不同的等价类中
  - 那么就将$K$细分为两个等价类：$s_1\in K_i,s_2\in K_j$。
- 递归进行以上步骤，知道所有等价类都不可再细分。

**例子**

![[不活跃主题/编译原理/词法分析/_attachments/Pasted image 20221101003444.png | 300]]

---

