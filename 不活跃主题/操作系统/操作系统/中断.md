**待整理**

#### 中断
总结

- 中断的分类
- 中断的执行过程：中断处理程序，向量表
- try-catch，断点的实质

![[不活跃主题/操作系统/操作系统/_attachments/1600092949633-d81ed087-5334-481a-afd5-53dd6f986419.png | 466]]


## 中断执行过程

##### 硬件的职责

- 保存中断：**中断寄存器**可以保存发来的中断信号，比如在CPU正忙时由硬件发送过来的中断信号。
- 执行中断：当**允许中断**时，在每个指令周期的最后，CPU会扫描**中断寄存器**，查看是否有中断信号。若有中断，通过查询**中断向量表**来执行中断处理程序。

##### 软件的职责

- 提供中断处理程序：操作系统会为每一类中断提供相应的**中断处理程序**，并且在系统初始化时设置**中断向量表**。中断向量表是一个一维数组，表项是中断处理程序的**入口地址**。
- 保存现场：硬件会保存一部分必要的寄存器，剩下的一些寄存器由软件来保存。

## 断点调试的实现
通过int 3指令实现的。是系统调用

## try-catch的实现
在windows-c++中，try-catch是通过SEH（structured exception handling，结构化异常处理机制）来实现的。当异常发生时，控制转到内核，内核会首先使用程序中的SEH链表（相当于中断处理程序）来处理异常。所以，try-catch本质还是中断处理。
