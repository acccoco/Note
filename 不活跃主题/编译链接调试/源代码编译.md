通过源代码安装软件，需要进行三个步骤：

- 配置 configure
- 编译 make
- 安装 make install

以 OpenCV 为例，介绍相关的步骤：
> 简单的的编译过程就是
> 

```shell
mkdir build
cd build
cmake ..
make
```

## configure
建立 `build` 文件夹：

```bash
cd opencv-4.5.0
mkdir build && cd build
```

指定配置选项
需要重点注意的是： `CMAKE_INSTALL_PREFIX` ，该选项可以指定软件的安装位置
默认情况下的安装位置为：

```bash
/usr/local/
|__ lib/    			# 库文件
|   |__ cmake/    # cmake 相关的
|__ bin/					# 可执行文件
|__ include/			# 头文件
|__ etc/				  # 配置文件
|__ share/ 				# 其他资源，包括例子
```

配置的命令为：

```bash
cmake \
  -DCMAKE_SYSTEM_PROCESSOR=arm64 \
  -DCMAKE_OSX_ARCHITECTURES=arm64 \
  -DWITH_OPENJPEG=OFF \
  -DWITH_IPP=OFF \
  -D CMAKE_BUILD_TYPE=RELEASE \
  -D CMAKE_INSTALL_PREFIX=/usr/local \
  -D INSTALL_PYTHON_EXAMPLES=ON \
  -D INSTALL_C_EXAMPLES=OFF \
  -D OPENCV_ENABLE_NONFREE=ON \
  -D BUILD_EXAMPLES=ON \
  ..	# 表示父文件夹里面有 CMakeLists.txt
```


## make

```bash
make -j8
```


## install

```bash
sudo make install
```


## 如何卸载

第一种方法：
如果指定了安装路径的前缀，如： `-D CMAKE_INSTALL_PREFIX=/usr/local/opencv-4.5.2` ，那么可以直接删掉该文件夹

第二种方法：
到 `build` 目录下，执行 `make uninstall`


---


### 新

首先使用 cmake 进行配置：
```cmake
cmake 
  -D<XXX>=XX											# 设置各种选项
  --install-prefix <install_dir>	# 设置安装的文件夹
  ..															# 存放 CMakeLists.txt 的文件夹
```
然后使用 make 进行构建，安装：
```cmake
make help			# 查看所有的 target，也可以使用 bash tab 
make install 	# 安装
```
