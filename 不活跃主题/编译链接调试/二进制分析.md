
### 汇编分析

#### 方法 _1_：直接将源代码编译为汇编文件
```shell
gcc -S -o <asm-file.s> <source-file.c>
```
其中，`gcc` 命令的一些选项：

- `-S` 表示仅进行汇编


#### 方法 _2_：将目标文件反汇编为汇编文件
```
gcc -g -c -o target_file.o source_file.c
objdump -S -d target_file.o > refer_file.txt
```
其中，`gcc` 命令的一些选项：

- `-g` 表示加入调试信息
- `-c` 表示仅汇编和编译，不链接

其中，`objdump` 命令的一些选项：

- `-d` 将代码段反汇编
- `-S` 表示反汇编的同时将汇编代码和源代码交替显式，需要在编译时通过 `-g` 选项加入调试信息


#### 方法 _3_：通过 `readelf` 命令获取各个段的信息
`readelf` 不提供反汇编的功能，但是可以查看段的各种信息，例如符号表信息。


#### 方法 _4_：通过 `gdb` 动态反汇编
使用 `gdb` 调试，通过命令可以反汇编正在运行的代码。



### 常用命令

#### file
查看文件的类型
以hello world为例
![[_attachments/1599449012963-a338afef-a9f7-4ad0-a4c6-4caafdffabb3.png | 983]]


#### ldd
找到可执行文件的依赖库
![[_attachments/1599449036969-0527e19d-0f20-4325-b566-4ba894aedf82.png | 886]]


#### ltrace命令
追踪命令运行了哪些函数
![[_attachments/1599449057987-a874d4c8-702c-4788-82e1-b8a6b755e370.png | 769]]


#### hexdump命令
查看文件的十六进制表示
![[_attachments/1599449074974-4eec5a41-060e-4151-a6b1-463b5f13d27a.png | 842]]


#### readelf命令
查看elf文件的信息


#### objdump命令
查看obj文件的各种信息，比如段信息，比如反汇编
![[_attachments/1599449084720-6cb98bcf-3387-4444-9c2d-4fd3c63fe10f.png | 981]]


#### strace命令
可以跟踪系统调用和各种信号
![[_attachments/1599449103035-ca337dff-60e7-4597-9875-0f620f9ea162.png | 990]]


#### nm命令
查看符号表信息
![[_attachments/1599449114776-67e2687a-3511-4ffd-acd8-2437fc5b0994.png | 697]]
