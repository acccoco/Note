
## 内存结构与 `UNPACK`：
`UNPACK` 可以把外层的 ？？ 消除掉
例子1 ：

| `data T = T (P Int Int)`                                                  | `data T = T {-# UNPACK #-} !(P Int Int)` |
|---------------------------------------------------------------------------| --- |
| ![[不活跃主题/Haskell/_attachments/1634384056995-6526e169-7ed5-4f2f-83db-034045d5d289.png \| 181]] | ![[不活跃主题/Haskell/_attachments/1634384163148-92b23eb3-699e-40b3-883c-0b888a5c81c6.png \| 167]] |


例子 2 ：

| `data U = U (P Int (P Int Int))`                                          | `data U = U {-# UNPACK #-} !(P Int (P Int Int))` |
|---------------------------------------------------------------------------| --- |
| ![[不活跃主题/Haskell/_attachments/1634384290910-43b0ca01-7104-48ae-a8fe-6fce43a3f779.png \| 230]] | ![[不活跃主题/Haskell/_attachments/1634384325705-b7d81552-eec8-4bd6-8c1e-e10fb68ea3e9.png \| 227]] |


## newtype
newtype 只允许有一个构造函数，且单参数。实际上会去掉最外层的包装：
例如：

| `data Book = Book Int Int` | ![[不活跃主题/Haskell/_attachments/1634384563515-64d0fca2-c7de-46cb-a731-4d7c7e13f8cd.png \| 139]] |
| --- | --- |
| `newtype Book = Book (Int, Int)` 相当于 `(Int, Int)` | ![[不活跃主题/Haskell/_attachments/1634384534015-a57e9d6c-dc8c-42f8-8486-9375ef5b4d18.png \| 141]] |
| `data Book = Book (Int, Int)` | ![[不活跃主题/Haskell/_attachments/1634384584914-d0c25ed8-26a2-44c6-89be-ff4c378505cc.png \| 151]] |

