**最保险的做法就是：避免使用多继承**。

## 菱形继承
不使用虚继承，菱形继承的结果是：
![[C++/多态/_attachments/1600055250645-96033b32-0a3d-4f78-87e5-25b235b112a3.png|400]]![[C++/多态/_attachments/1600055250685-e930bfa7-0653-411a-8b7f-b2755babacad.png|400]]

可以看到：在对象`(Derive1)d1`的内存布局中，成员`int base0_1`出现了**重复**；在类`Derive1`的虚表中，指向函数`Base0::base0_func1(void)`的条目出现了**重复**。

## 虚继承
虚继承的使用方法如下：
![[C++/多态/_attachments/1600055250724-5104b2ed-69b8-4b46-b03d-301a1d66b4bf.png|400]]

`Base0`叫做虚基类。在对象`(Derive1)d1`中，只有一份关于`Base0`的内容。
`Base1`使用`virtual`来继承，可以理解为：愿意和其他类共享`Base0`的拷贝。
