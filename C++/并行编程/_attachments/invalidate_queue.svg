<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="828px" height="972px" viewBox="-0.5 -0.5 828 972" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2022-07-12T10:00:41.705Z&quot; agent=&quot;5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/17.2.4 Chrome/96.0.4664.174 Electron/16.1.0 Safari/537.36&quot; etag=&quot;xi1kPBHtpF3p4kgRrt-o&quot; version=&quot;17.2.4&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;Cw_i6ZXWr9DEh4gLF7iI&quot; name=&quot;第 1 页&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><path d="M 280 65 L 300 65 Q 310 65 319.47 68.2 L 507.53 131.8 Q 517 135 527 135 L 540.63 135" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 545.88 135 L 538.88 138.5 L 540.63 135 L 538.88 131.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)rotate(20 350.07592064092387 80.23229019611483)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 80px; margin-left: 350px;"><div data-drawio-colors="color: #FF0000; background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Consolas; color: rgb(255, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">Invdalidate(a)</div></div></div></foreignObject><text x="350" y="84" fill="#FF0000" font-family="Consolas" font-size="11px" text-anchor="middle">Invdalidate(a)</text></switch></g><rect x="120" y="20" width="160" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 158px; height: 1px; padding-top: 50px; margin-left: 122px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">执行 a = 1，<br />因为 a 是 shared，因此放入 store buffer</div></div></div></foreignObject><text x="122" y="54" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px">执行 a = 1，...</text></switch></g><rect x="0" y="0" width="120" height="40" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 20px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">store buffer<br /><font color="#ff0000">(unmarked) a = 1</font></div></div></div></foreignObject><text x="60" y="24" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">store buffer...</text></switch></g><rect x="0" y="40" width="120" height="50" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 65px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">cache<br />(shared) a = 0<br />(exclusive) b = 0</div></div></div></foreignObject><text x="60" y="69" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">cache...</text></switch></g><path d="M 547 25 Q 517 25 413.5 258.75 Q 310 492.5 286.37 492.5" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 281.12 492.5 L 288.12 489 L 286.37 492.5 L 288.12 496 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)rotate(-60 500.7581386932957 75.54828487790917)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 76px; margin-left: 501px;"><div data-drawio-colors="color: #FF0000; background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Consolas; color: rgb(255, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">Read(b)</div></div></div></foreignObject><text x="501" y="79" fill="#FF0000" font-family="Consolas" font-size="11px" text-anchor="middle">Read(b)</text></switch></g><rect x="547" y="10" width="160" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 158px; height: 1px; padding-top: 40px; margin-left: 549px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">执行 while (b == 0)，<br />向其他 CPU 请求 data</div></div></div></foreignObject><text x="549" y="44" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px">执行 while (b == 0)，...</text></switch></g><path d="M 547 165 L 527 165 Q 517 165 507.14 166.67 L 319.86 198.33 Q 310 200 300 200 L 286.37 200" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 281.12 200 L 288.12 196.5 L 286.37 200 L 288.12 203.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)rotate(-15 501.10861442958594 170.17756119892636)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 170px; margin-left: 501px;"><div data-drawio-colors="color: #FF0000; background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Consolas; color: rgb(255, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">Invdalidate Ack</div></div></div></foreignObject><text x="501" y="173" fill="#FF0000" font-family="Consolas" font-size="11px" text-anchor="middle">Invdalidate Ack</text></switch></g><rect x="547" y="120" width="160" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 158px; height: 1px; padding-top: 150px; margin-left: 549px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">收到 Invalidate 消息，<br />回应消息，<br />将消息放入 queue</div></div></div></foreignObject><text x="549" y="154" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px">收到 Invalidate 消息，...</text></switch></g><rect x="707" y="120" width="120" height="30" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 135px; margin-left: 708px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">invalid queue<br /><font color="#ff0000">Invdalidate(a)</font></div></div></div></foreignObject><text x="767" y="139" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">invalid queue...</text></switch></g><rect x="120" y="185" width="160" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 158px; height: 1px; padding-top: 215px; margin-left: 122px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">收到 Invalidate 的回应，<br />将 a 从 store buffer 放入 cache 中</div></div></div></foreignObject><text x="122" y="219" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px">收到 Invalidate 的回应，...</text></switch></g><rect x="0" y="185" width="120" height="20" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 195px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">store buffer<br /></div></div></div></foreignObject><text x="60" y="199" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">store buffer&#xa;</text></switch></g><rect x="0" y="205" width="120" height="50" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 230px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">cache<br /><font color="#ff0000">(modified) a = 1<br /></font>(exclusive) b = 0</div></div></div></foreignObject><text x="60" y="234" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">cache...</text></switch></g><rect x="120" y="290" width="160" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 158px; height: 1px; padding-top: 320px; margin-left: 122px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">执行 smp_wmb()<br />之前的 store buffer 处理完了，可以直接越过</div></div></div></foreignObject><text x="122" y="324" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px">执行 smp_wmb()...</text></switch></g><rect x="120" y="390" width="160" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 158px; height: 1px; padding-top: 415px; margin-left: 122px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">执行 b = 1，<br />直接将结果放入 cache</div></div></div></foreignObject><text x="122" y="419" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px">执行 b = 1，...</text></switch></g><rect x="0" y="400" width="120" height="50" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 425px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">cache<br />(modified) a = 1<br /><font color="#ff0000">(modified) b = 1</font></div></div></div></foreignObject><text x="60" y="429" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">cache...</text></switch></g><path d="M 280 517.5 L 300 517.5 Q 310 517.5 319.97 518.22 L 507.03 531.78 Q 517 532.5 527 532.5 L 540.63 532.5" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 545.88 532.5 L 538.88 536 L 540.63 532.5 L 538.88 529 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)rotate(5 365.23840899615243 522.0141443482185)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 522px; margin-left: 365px;"><div data-drawio-colors="color: #FF0000; background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Consolas; color: rgb(255, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">Read Response(b = 1)</div></div></div></foreignObject><text x="365" y="525" fill="#FF0000" font-family="Consolas" font-size="11px" text-anchor="middle">Read Response(b = 1)</text></switch></g><rect x="120" y="480" width="160" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 158px; height: 1px; padding-top: 505px; margin-left: 122px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">收到 Read(b)，回复，<br />将 cache 标记为 shared</div></div></div></foreignObject><text x="122" y="509" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px">收到 Read(b)，回复，...</text></switch></g><rect x="0" y="490" width="120" height="50" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 515px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">cache<br />(modified) a = 1<br /><font color="#ff0000">(shared) b = 1</font></div></div></div></foreignObject><text x="60" y="519" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">cache...</text></switch></g><rect x="547" y="520" width="160" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 158px; height: 1px; padding-top: 545px; margin-left: 549px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">收到 b，<br />放入 cache</div></div></div></foreignObject><text x="549" y="549" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px">收到 b，...</text></switch></g><rect x="707" y="35" width="120" height="30" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 50px; margin-left: 708px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">cache<br />(shared) a = 0</div></div></div></foreignObject><text x="767" y="54" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">cache...</text></switch></g><rect x="707" y="15" width="120" height="20" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 25px; margin-left: 708px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">invalid queue<br /></div></div></div></foreignObject><text x="767" y="29" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">invalid queue&#xa;</text></switch></g><rect x="707" y="540" width="120" height="40" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 560px; margin-left: 708px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">cache<br />(shared) a = 0<br /><font color="#ff0000">（shared) b = 1</font></div></div></div></foreignObject><text x="767" y="564" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">cache...</text></switch></g><rect x="547" y="600" width="160" height="80" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 158px; height: 1px; padding-top: 640px; margin-left: 549px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">跳出 while (b == 0) 的循环，遇到 smp_rbm(),<br />等待 invdalidation queue 处理完毕</div></div></div></foreignObject><text x="549" y="644" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px">跳出 while (b == 0) 的循环，遇到 smp_rbm()...</text></switch></g><rect x="547" y="710" width="160" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 158px; height: 1px; padding-top: 740px; margin-left: 549px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">处理 invalidation queue 的消息，<br />将 cache 中的 a 无效化</div></div></div></foreignObject><text x="549" y="744" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px">处理 invalidation queue 的消息，...</text></switch></g><rect x="707" y="710" width="120" height="20" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 720px; margin-left: 708px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">invalid queue<br /></div></div></div></foreignObject><text x="767" y="724" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">invalid queue&#xa;</text></switch></g><rect x="707" y="730" width="120" height="40" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 750px; margin-left: 708px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">cache<br />（shared) b = 1</div></div></div></foreignObject><text x="767" y="754" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">cache...</text></switch></g><path d="M 547 845 L 527 845 Q 517 845 507.04 845.91 L 319.96 863.09 Q 310 864 300 864 L 286.37 864" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 281.12 864 L 288.12 860.5 L 286.37 864 L 288.12 867.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)rotate(-15 491.06446423996 849.2251005196706)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 849px; margin-left: 491px;"><div data-drawio-colors="color: #FF0000; background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Consolas; color: rgb(255, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">Read(a)</div></div></div></foreignObject><text x="491" y="853" fill="#FF0000" font-family="Consolas" font-size="11px" text-anchor="middle">Read(a)</text></switch></g><rect x="547" y="800" width="160" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 158px; height: 1px; padding-top: 830px; margin-left: 549px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">执行 assert(a == 1)，<br />cache miss，<br />向其他 CPU 读取</div></div></div></foreignObject><text x="549" y="834" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px">执行 assert(a == 1)，...</text></switch></g><path d="M 280 884 L 300 884 Q 310 884 319.81 885.94 L 507.19 923.06 Q 517 925 527 925 L 540.63 925" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 545.88 925 L 538.88 928.5 L 540.63 925 L 538.88 921.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)rotate(15 379.80624939161294 899.3881302230304)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 899px; margin-left: 380px;"><div data-drawio-colors="color: #FF0000; background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Consolas; color: rgb(255, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">Read Response(a = 1)</div></div></div></foreignObject><text x="380" y="903" fill="#FF0000" font-family="Consolas" font-size="11px" text-anchor="middle">Read Response(a = 1)</text></switch></g><rect x="120" y="854" width="160" height="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 158px; height: 1px; padding-top: 874px; margin-left: 122px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">回复 a 的值</div></div></div></foreignObject><text x="122" y="878" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px">回复 a 的值</text></switch></g><rect x="0" y="849" width="120" height="50" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 874px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">cache<br /><font color="#ff0000">(shared) a = 1<br /></font>(shared) b = 1</div></div></div></foreignObject><text x="60" y="878" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">cache...</text></switch></g><rect x="547" y="910" width="160" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 158px; height: 1px; padding-top: 940px; margin-left: 549px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">将 a 放入 cache，<br />执行 assert(a == 1)，<br />通过</div></div></div></foreignObject><text x="549" y="944" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px">将 a 放入 cache，...</text></switch></g><rect x="707" y="930" width="120" height="40" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 950px; margin-left: 708px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">cache<br /><font color="#ff0000">(shared) a = 1<br /></font>（shared) b = 1</div></div></div></foreignObject><text x="767" y="954" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">cache...</text></switch></g><rect x="0" y="290" width="120" height="20" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 300px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">store buffer<br /></div></div></div></foreignObject><text x="60" y="304" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">store buffer&#xa;</text></switch></g><rect x="0" y="310" width="120" height="50" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 335px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">cache<br />(modified) a = 1<br />(exclusive) b = 0</div></div></div></foreignObject><text x="60" y="339" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">cache...</text></switch></g><rect x="0" y="380" width="120" height="20" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 390px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">store buffer<br /></div></div></div></foreignObject><text x="60" y="394" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">store buffer&#xa;</text></switch></g><rect x="0" y="470" width="120" height="20" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 480px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">store buffer<br /></div></div></div></foreignObject><text x="60" y="484" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">store buffer&#xa;</text></switch></g><rect x="707" y="150" width="120" height="30" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 165px; margin-left: 708px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">cache<br />(shared) a = 0</div></div></div></foreignObject><text x="767" y="169" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">cache...</text></switch></g><rect x="707" y="510" width="120" height="30" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 525px; margin-left: 708px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">invalid queue<br />Invdalidate(a)</div></div></div></foreignObject><text x="767" y="529" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">invalid queue...</text></switch></g><rect x="707" y="635" width="120" height="40" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 655px; margin-left: 708px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">cache<br />(shared) a = 0<br />（shared) b = 1</div></div></div></foreignObject><text x="767" y="659" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">cache...</text></switch></g><rect x="707" y="605" width="120" height="30" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 620px; margin-left: 708px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">invalid queue<br />Invdalidate(a)</div></div></div></foreignObject><text x="767" y="624" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">invalid queue...</text></switch></g><rect x="707" y="800" width="120" height="20" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 810px; margin-left: 708px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">invalid queue<br /></div></div></div></foreignObject><text x="767" y="814" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">invalid queue&#xa;</text></switch></g><rect x="707" y="820" width="120" height="40" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 840px; margin-left: 708px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">cache<br />（shared) b = 1</div></div></div></foreignObject><text x="767" y="844" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">cache...</text></switch></g><rect x="707" y="910" width="120" height="20" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 920px; margin-left: 708px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">invalid queue<br /></div></div></div></foreignObject><text x="767" y="924" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">invalid queue&#xa;</text></switch></g><rect x="0" y="829" width="120" height="20" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 839px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Consolas; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">store buffer<br /></div></div></div></foreignObject><text x="60" y="843" fill="rgb(0, 0, 0)" font-family="Consolas" font-size="12px" text-anchor="middle">store buffer&#xa;</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>