---
tags:
    - vulkan
---

可以参考以下文章：

Vulkan Memory Management

[https://developer.nvidia.com/vulkan-memory-management](https://developer.nvidia.com/vulkan-memory-management)

vulkan 内有许多内存堆，通过 vkGetPhysicalDeviceMemoryProperties() 报告出来。

host cohorence 属性：host 写入后，不需要 flush，就可以确保 device 能够观测到。

vkGetBufferMemoryRequirements() 报告的内存考虑了 mips，对齐数据，以及元数据。


## 内存分配需要首先考虑物理设备：

-   统一内存架构 UMA，例如 M1，ps4
-   非统一：独立显卡

非同一就不允许 VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT | VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT 组合


## 稀疏资源

将零散的 device memory 组合在一起，在其上建立起 Buffer 或 Image：
![[_attachments/Pasted image 20221103022505.png|400]]