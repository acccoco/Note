
### 大气

大气的拟合方程：Analytic Atmosphere Appearance Modeling

输入是观察角度以及太阳高度，输出是颜色值。

![[_attachments/Pasted image 20221225151802.png | 500]]

这个模型比较简单，只适合某种天气状况，只能表示地面上的大气状况。

---

从 participating media 模型得到大气颜色。

分析大气中粒子与光的交互模式，得到 Radiative Transfer Equation：

![[_attachments/Pasted image 20221225152445.png|500]]

眼睛看到的应该是什么样子的，通过 VRE 计算出：

![[_attachments/Pasted image 20221225152644.png|500]]

上面的两个方程，RTE 是微分方程，将其积分后，就得到了 VRE。


然后是散射模型：

- 对于各种尺度接近波长的粒子（气体分子），发生的散射是 Rayleigh 散射。对于短波长的光，几乎是均匀散射，长波长的光，散射较弱。
- 对于各种气溶胶粒子，发生的是 Mie 散射。散射有一定的方向性，且对于波长不敏感。

> [!info] 详细就参考 PPT，以及原视频。RTR 上也有简单介绍。

具体的算法就是：Precomputed Atomospheric Scattering

---

另一个方法，在上面的基础上进行了一系列的简化，且更直观。

Production Friendly Quick Sky and Atmosphere Rendering

UE5 采样的这个方法。



### 云的渲染

云的类型：层云，层积云，卷云。

云的方法：

- mesh：直接放置模型，很古老的方法
- billboard：效果有限
- volumatric：体素方法。效果最好，目前的方法。

思路：由纹理提供基础形状，使用各种 Noise 来产生丰富的细节。得到的是三维体素结构。

云的渲染：使用 Ray March 方法来渲染体积云。类似于大气散射的方法。








