### 帧缓冲
帧缓冲对象包含很多的**附加点**（Attachment Point），这些附加点可以绑定颜色缓冲、深度缓冲和模板缓冲，附加点上面绑定的对象叫做**附件**（Attachment）

窗口系统会提供一个默认的帧缓冲对象

帧缓冲，附件的示意图：
![[OpenGL/_attachments/image-47.png | 400]]

### 纹理附件和渲染缓冲对象附件
可以作为附件附加到帧缓冲的有两种：纹理附件和渲染缓冲对象附件

纹理附件和普通的纹理并无任何区别，创建方法是一样的。可以在 shader 中使用 sampler 对纹理附件进行**采样**。
渲染缓冲对象附件是专门为离屏渲染（off-screen rendering）优化过的，数据格式是 OpenGL 的原生渲染格式。无法对渲染缓冲对象进行**采样**。

一般来说，对于颜色附件使用纹理对象，因为要对它进行采样；对于深度和模板附件，使用渲染缓冲对象，一般不会对它们进行采样。

### 例子：对场景进行后处理
一般思路：这里需要用到两次渲染：

1. 进行离屏渲染，将当前场景渲染到一张颜色贴图中
2. 渲染一个矩形，使用颜色贴图进行采样，在 fragment shader 中进行后处理

常用的后期处理：
#### 基于当前像素进行变换：

- 反相： `1 - pixel_color` 
- 灰度图： `gray = dot(vec3(1/3, 1/3, 1/3), pixel_color)` 

#### 利用周围像素处理
也就是使用卷积核进行处理，一些常见的处理以及卷积核：

- 锐化（总体亮度不变）：$$\left[\begin{array}{ccc}
2 & 2 & 2 \\
2 & -15 & 2 \\
2 & 2 & 2
\end{array}\right]$$

- 模糊（总体亮度不变）：$$\left[\begin{array}{ccc}
1 & 2 & 1 \\
2 & 4 & 2 \\
1 & 2 & 1
\end{array}\right] / 16$$

- 边缘检测（总体亮度变暗）：$$\left[\begin{array}{ccc}
1 & 1 & 1 \\
1 & -8 & 1 \\
1 & 1 & 1
\end{array}\right]$$
